╔══════════════════════════════════════════════════════════════════════╗
║                                                                      ║
║                            O P E N P O L E                           ║
║            «Поле Чудес» (1992) — реверс/порт под MS-DOS              ║
║                                                                      ║
╚══════════════════════════════════════════════════════════════════════╝

  ЧТО ЭТО ТАКОЕ?   
  --------------                                              
 
OpenPole — порт классической MS-DOS игры «Поле Чудес» на C под Open Watcom.

ВАЖНО: проект не содержит оригинальных ассетов.

ПОДДЕРЖКА: Если вы хотите поддержать автора, купите у меня
что-то на Авито ;) 
https://www.avito.ru/user/22a7dfb38d660bdc176a1e0e0e9649bc/profile


КАК СОБИРАТЬ?  
-------------
 
Сборка под Linux / macOS  
------------------------
Нужен Open Watcom C 2 - https://github.com/open-watcom

1) git clone ...
2) проверить пути к Open Watcom C в Makefile
3) make release  (не wmake, а обычный GNU Make) или make debug 

Нужны файлы из оригинальной игры:
 - POLE.LIB
 - POLE.FNT
 - POLE.OVL


Сборка под MS-DOS  
-----------------
  1) положить в /DOS дистрибьютив Open Watcom (в папку WC) 
  2) в корне запустить:  dosify.py
  3) смонтировать папку DOS в DOSBox
  4) запустить:  MAKE.BAT
  5) положить OPENPOLE.EXE рядом с: POLE.LIB, POLE.FNT, POLE.OVL
   
Полезные ссылки
---------------
Open Watcom 1.9 for DOS:
https://github.com/open-watcom/open-watcom-1.9/releases/download/ow1.9/open-watcom-c-dos-1.9.exe

Оригинал игры на old-dos.ru:
http://old-dos.ru/index.php?page=files&mode=games&do=show&id=776

 
СТРУКТУРА  
---------

Под каждую процедуру из дизасма — свой модуль:
┌───────────────────────────────┬──────────────────────────────────────────────┐
│ ФАЙЛ                          │ НАЗНАЧЕНИЕ                                   │
├───────────────────────────────┼──────────────────────────────────────────────┤
│ /src/baraban.c                │ отрисовка и кручение барабана                │
│ /src/bgi_mouse.c              │ мышь                                         │
│ /src/bgi_palette.c            │ палитра                                      │
│ /src/boss_mode.c              │ TAB: затемняем экран                         │
│ /src/cstr.c                   │ операции со строками                         │
│ /src/debuglog.c               │ модуль для отладки                           │
│ /src/ega_draw.c               │ EGA: рисование                               │
│ /src/ega_text.c               │ EGA: текст                                   │
│ /src/end_screen.c             │ финальный экран                              │
│ /src/girl.c                   │ девушка, открытие букв                       │
│ /src/globals.c                │ все глобалы                                  │
│ /src/input.c                  │ ввод: клавиатура, мышь                       │
│ /src/letter.c                 │ открытие букв в слове и сектор ПЛЮС          │
│ /src/moneybox.c               │ шкатулка                                     │
│ /src/opponents.c              │ компьютерные игроки                          │
│ /src/pole_dialog.c            │ все строки (ВАЖНО: должен быть в CP866)      │
│ /src/pole.c                   │ главный игровой цикл                         │
│ /src/prize.c                  │ «Беру ПРИЗ»                                  │
│ /src/random.c                 │ рандом как в паскале                         │
│ /src/resources.c              │ POLE.LIB, POLE.FNT, POLE.PIC (если есть)     │
│ /src/rle_draw.c               │ RLE: декодер и рисование                     │
│ /src/sale_info.c              │ рекламная пауза                              │
│ /src/score.c                  │ рисуем очки игроков                          │
│ /src/sound.c                  │ звук как в паскале                           │
│ /src/stackpat.c               │ отладка                                      │
│ /src/startscreen.c            │ начальная заставка                           │
│ /src/sys_delay.c              │ нормальный delay вместо DELAY() из CRT       │
│ /src/ui_answer.c              │ «скажу слово»                                │
│ /src/ui_choice.c              │ выбор                                        │
│ /src/ui_hof.c                 │ доска рекордов                               │
│ /src/ui_keymap.c              │ QWERTY -> ЙЦУКЕН map                         │
│ /src/words.c                  │ база слов POLE.OVL                           │
│ /src/yakubovich.c             │ якубович                                     │
│ openpole.c                    │ лаунчер                                      │
└───────────────────────────────┴──────────────────────────────────────────────┘


ДИСКЛЕЙМЕР                                                           
----------

Это фанатский инженерный проект для изучения/сохранения ретро-ПО.
Пока в коде полно трудночитаемых кусков из Ghidra с захардкоженными
смещениями в видеопамяти и прочими нелепостями (но все меньше и меньше)

Проект не аффилирован с правообладателями оригинальной игры.
Оригинальные ассеты не распространяются этим репозиторием.


 
ТИТРЫ 
-----        
 
  - Автор оригинальной игры «Поле Чудес» (MS-DOS): Вадим Башуров
  - Автор порта: Дмитрий Герасимук, телефона в Арзамасе нет           
    dmitrygerasimuk@gmail.com // ig: dmitrygerasimuk                    